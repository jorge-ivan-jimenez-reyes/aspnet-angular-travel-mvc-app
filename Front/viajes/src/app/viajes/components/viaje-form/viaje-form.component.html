<p-toast></p-toast>
<div class="viaje-form-container">
  <h2>{{ isEditing ? 'Editar' : 'Nuevo' }} Viaje</h2>
  <form [formGroup]="viajeForm" (ngSubmit)="onSubmit()">
<div class="p-field">
  <label for="origen">Origen</label>
  <input id="origen" type="text" pInputText formControlName="origen" required>
  <small *ngIf="viajeForm.get('origen')?.hasError('required') && viajeForm.get('origen')?.touched" class="p-error">El origen es requerido</small>
</div>

<div class="p-field">
  <label for="destino">Destino (lugar donde termina el viaje)</label>
  <input id="destino" type="text" pInputText formControlName="destino" required>
  <small *ngIf="viajeForm.get('destino')?.hasError('required') && viajeForm.get('destino')?.touched" class="p-error">El destino es requerido</small>
</div>

<div class="p-field">
  <label for="fechaHoraInicio">Fecha y Hora de Inicio Programado</label>
  <p-calendar id="fechaHoraInicio" formControlName="fechaHoraInicio" [showTime]="true" [showSeconds]="true" dateFormat="dd/mm/yy" inputId="timeonly" required></p-calendar>
  <small *ngIf="viajeForm.get('fechaHoraInicio')?.hasError('required') && viajeForm.get('fechaHoraInicio')?.touched" class="p-error">La fecha y hora de inicio son requeridas</small>
</div>

<div class="p-field">
  <label for="fechaHoraFin">Fecha y Hora de Fin Programado</label>
  <p-calendar id="fechaHoraFin" formControlName="fechaHoraFin" [showTime]="true" [showSeconds]="true" dateFormat="dd/mm/yy" inputId="timeonly" required></p-calendar>
  <small *ngIf="viajeForm.get('fechaHoraFin')?.hasError('required') && viajeForm.get('fechaHoraFin')?.touched" class="p-error">La fecha y hora de fin son requeridas</small>
</div>

<div class="p-field">
  <label for="operador">Operador</label>
  <input id="operador" type="text" pInputText formControlName="operador" required>
  <small *ngIf="viajeForm.get('operador')?.hasError('required') && viajeForm.get('operador')?.touched" class="p-error">El operador es requerido</small>
</div>

    <div class="p-field">
      <label for="presupuesto">Presupuesto</label>
      <p-inputNumber id="presupuesto" formControlName="presupuesto" [min]="0" mode="currency" currency="USD" locale="en-US" required class="{'background-color': '#ffffff', 'color': 'var(--color-background)'}"></p-inputNumber>
      <small *ngIf="viajeForm.get('presupuesto')?.hasError('required') && viajeForm.get('presupuesto')?.touched" class="p-error">El presupuesto es requerido</small>
      <small *ngIf="viajeForm.get('presupuesto')?.hasError('min') && viajeForm.get('presupuesto')?.touched" class="p-error">El presupuesto debe ser mayor o igual a 0</small>
    </div>

    <div class="p-field">
      <label for="lugarId">Lugar</label>
      <p-dropdown id="lugarId" [options]="lugares" formControlName="lugarId" optionLabel="nombre" optionValue="id" [filter]="true" filterBy="nombre" required [style]="{'background-color': '#ffffff', 'color': 'var(--color-text-primary)'}"></p-dropdown>
      <small *ngIf="viajeForm.get('lugarId')?.hasError('required') && viajeForm.get('lugarId')?.touched" class="p-error">El lugar es requerido</small>
    </div>

    <div class="p-field">
      <label for="estatusId">Estatus</label>
      <p-dropdown id="estatusId" [options]="estatusViajes" formControlName="estatusId" optionLabel="nombre" optionValue="id" required [style]="{'background-color': '#ffffff', 'color': 'var(--color-text-primary)'}"></p-dropdown>
      <small *ngIf="viajeForm.get('estatusId')?.hasError('required') && viajeForm.get('estatusId')?.touched" class="p-error">El estatus es requerido</small>
    </div>

    <div class="p-field">
      <label for="transporteId">Transporte</label>
      <p-dropdown id="transporteId" [options]="transportes" formControlName="transporteId" optionLabel="nombre" optionValue="id" required [style]="{'background-color': '#ffffff', 'color': 'var(--color-text-primary)'}"></p-dropdown>
      <small *ngIf="viajeForm.get('transporteId')?.hasError('required') && viajeForm.get('transporteId')?.touched" class="p-error">El transporte es requerido</small>
    </div>

    <div class="form-actions">
      <p-button type="submit" label="Guardar" [disabled]="!viajeForm.valid"></p-button>
      <p-button type="button" label="Cancelar" (onClick)="navigateToViajes()" styleClass="p-button-secondary"></p-button>
    </div>
  </form>
</div>
