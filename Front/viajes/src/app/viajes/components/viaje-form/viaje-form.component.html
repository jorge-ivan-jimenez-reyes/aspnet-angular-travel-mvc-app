<p-toast></p-toast>
<div class="viaje-form-container">
  <h2>{{ isEditing ? 'Editar' : 'Nuevo' }} Viaje</h2>
  <form [formGroup]="viajeForm" (ngSubmit)="onSubmit()">
    <div class="p-field">
      <label for="destino">Destino</label>
      <input id="destino" type="text" pInputText formControlName="destino" required>
      <small *ngIf="viajeForm.get('destino')?.hasError('required') && viajeForm.get('destino')?.touched" class="p-error">El destino es requerido</small>
    </div>

    <div class="p-field">
      <label for="fechaInicio">Fecha de Inicio</label>
      <p-calendar id="fechaInicio" formControlName="fechaInicio" [showIcon]="true" required></p-calendar>
      <small *ngIf="viajeForm.get('fechaInicio')?.hasError('required') && viajeForm.get('fechaInicio')?.touched" class="p-error">La fecha de inicio es requerida</small>
    </div>

    <div class="p-field">
      <label for="fechaFin">Fecha de Fin</label>
      <p-calendar id="fechaFin" formControlName="fechaFin" [showIcon]="true" required></p-calendar>
      <small *ngIf="viajeForm.get('fechaFin')?.hasError('required') && viajeForm.get('fechaFin')?.touched" class="p-error">La fecha de fin es requerida</small>
    </div>

    <div class="p-field">
      <label for="presupuesto">Presupuesto</label>
      <p-inputNumber id="presupuesto" formControlName="presupuesto" [min]="0" mode="currency" currency="USD" locale="en-US" required></p-inputNumber>
      <small *ngIf="viajeForm.get('presupuesto')?.hasError('required') && viajeForm.get('presupuesto')?.touched" class="p-error">El presupuesto es requerido</small>
      <small *ngIf="viajeForm.get('presupuesto')?.hasError('min') && viajeForm.get('presupuesto')?.touched" class="p-error">El presupuesto debe ser mayor o igual a 0</small>
    </div>

    <div class="p-field">
      <label for="lugarId">Lugar</label>
      <p-dropdown id="lugarId" [options]="lugares" formControlName="lugarId" optionLabel="nombre" optionValue="id" [filter]="true" filterBy="nombre" required></p-dropdown>
      <small *ngIf="viajeForm.get('lugarId')?.hasError('required') && viajeForm.get('lugarId')?.touched" class="p-error">El lugar es requerido</small>
    </div>

    <div class="p-field">
      <label for="estatusId">Estatus</label>
      <p-dropdown id="estatusId" [options]="estatusViajes" formControlName="estatusId" optionLabel="nombre" optionValue="id" required></p-dropdown>
      <small *ngIf="viajeForm.get('estatusId')?.hasError('required') && viajeForm.get('estatusId')?.touched" class="p-error">El estatus es requerido</small>
    </div>

    <div class="p-field">
      <label for="transporteId">Transporte</label>
      <p-dropdown id="transporteId" [options]="transportes" formControlName="transporteId" optionLabel="nombre" optionValue="id" required></p-dropdown>
      <small *ngIf="viajeForm.get('transporteId')?.hasError('required') && viajeForm.get('transporteId')?.touched" class="p-error">El transporte es requerido</small>
    </div>

    <div class="form-actions">
      <p-button type="submit" label="Guardar" [disabled]="!viajeForm.valid"></p-button>
      <p-button type="button" label="Cancelar" (onClick)="navigateToViajes()" styleClass="p-button-secondary"></p-button>
    </div>
  </form>
</div>
